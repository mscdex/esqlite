Local<String> esqlite_err_name(int rc) {
#define ERR_NAME_PAIR(name) { name, #name },
  static unordered_map<int, string> err_map {
    ERR_NAME_PAIR(SQLITE_ABORT)
    ERR_NAME_PAIR(SQLITE_ABORT_ROLLBACK)
    ERR_NAME_PAIR(SQLITE_AUTH)
    ERR_NAME_PAIR(SQLITE_BUSY)
    ERR_NAME_PAIR(SQLITE_BUSY_RECOVERY)
    ERR_NAME_PAIR(SQLITE_BUSY_SNAPSHOT)
    ERR_NAME_PAIR(SQLITE_CANTOPEN)
    ERR_NAME_PAIR(SQLITE_CANTOPEN_CONVPATH)
    ERR_NAME_PAIR(SQLITE_CANTOPEN_FULLPATH)
    ERR_NAME_PAIR(SQLITE_CANTOPEN_ISDIR)
    ERR_NAME_PAIR(SQLITE_CANTOPEN_NOTEMPDIR)
    ERR_NAME_PAIR(SQLITE_CANTOPEN_SYMLINK)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_CHECK)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_COMMITHOOK)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_FOREIGNKEY)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_FUNCTION)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_NOTNULL)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_PRIMARYKEY)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_ROWID)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_TRIGGER)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_UNIQUE)
    ERR_NAME_PAIR(SQLITE_CONSTRAINT_VTAB)
    ERR_NAME_PAIR(SQLITE_CORRUPT)
    ERR_NAME_PAIR(SQLITE_CORRUPT_VTAB)
    ERR_NAME_PAIR(SQLITE_DONE)
    ERR_NAME_PAIR(SQLITE_EMPTY)
    ERR_NAME_PAIR(SQLITE_ERROR)
    ERR_NAME_PAIR(SQLITE_ERROR_MISSING_COLLSEQ)
    ERR_NAME_PAIR(SQLITE_ERROR_RETRY)
    ERR_NAME_PAIR(SQLITE_ERROR_SNAPSHOT)
    ERR_NAME_PAIR(SQLITE_FORMAT)
    ERR_NAME_PAIR(SQLITE_FULL)
    ERR_NAME_PAIR(SQLITE_INTERNAL)
    ERR_NAME_PAIR(SQLITE_INTERRUPT)
    ERR_NAME_PAIR(SQLITE_IOERR)
    ERR_NAME_PAIR(SQLITE_IOERR_ACCESS)
    ERR_NAME_PAIR(SQLITE_IOERR_CHECKRESERVEDLOCK)
    ERR_NAME_PAIR(SQLITE_IOERR_CLOSE)
    ERR_NAME_PAIR(SQLITE_IOERR_CONVPATH)
    ERR_NAME_PAIR(SQLITE_IOERR_DELETE)
    ERR_NAME_PAIR(SQLITE_IOERR_DELETE_NOENT)
    ERR_NAME_PAIR(SQLITE_IOERR_DIR_CLOSE)
    ERR_NAME_PAIR(SQLITE_IOERR_DIR_FSYNC)
    ERR_NAME_PAIR(SQLITE_IOERR_FSTAT)
    ERR_NAME_PAIR(SQLITE_IOERR_FSYNC)
    ERR_NAME_PAIR(SQLITE_IOERR_GETTEMPPATH)
    ERR_NAME_PAIR(SQLITE_IOERR_LOCK)
    ERR_NAME_PAIR(SQLITE_IOERR_MMAP)
    ERR_NAME_PAIR(SQLITE_IOERR_NOMEM)
    ERR_NAME_PAIR(SQLITE_IOERR_RDLOCK)
    ERR_NAME_PAIR(SQLITE_IOERR_READ)
    ERR_NAME_PAIR(SQLITE_IOERR_SEEK)
    ERR_NAME_PAIR(SQLITE_IOERR_SHMLOCK)
    ERR_NAME_PAIR(SQLITE_IOERR_SHMMAP)
    ERR_NAME_PAIR(SQLITE_IOERR_SHMOPEN)
    ERR_NAME_PAIR(SQLITE_IOERR_SHMSIZE)
    ERR_NAME_PAIR(SQLITE_IOERR_SHORT_READ)
    ERR_NAME_PAIR(SQLITE_IOERR_TRUNCATE)
    ERR_NAME_PAIR(SQLITE_IOERR_UNLOCK)
    ERR_NAME_PAIR(SQLITE_IOERR_WRITE)
    ERR_NAME_PAIR(SQLITE_LOCKED)
    ERR_NAME_PAIR(SQLITE_LOCKED_SHAREDCACHE)
    ERR_NAME_PAIR(SQLITE_MISMATCH)
    ERR_NAME_PAIR(SQLITE_MISUSE)
    ERR_NAME_PAIR(SQLITE_NOLFS)
    ERR_NAME_PAIR(SQLITE_NOMEM)
    ERR_NAME_PAIR(SQLITE_NOTADB)
    ERR_NAME_PAIR(SQLITE_NOTFOUND)
    ERR_NAME_PAIR(SQLITE_NOTICE)
    ERR_NAME_PAIR(SQLITE_NOTICE_RBU)
    ERR_NAME_PAIR(SQLITE_NOTICE_RECOVER_ROLLBACK)
    ERR_NAME_PAIR(SQLITE_NOTICE_RECOVER_WAL)
    ERR_NAME_PAIR(SQLITE_OK)
    ERR_NAME_PAIR(SQLITE_PERM)
    ERR_NAME_PAIR(SQLITE_PROTOCOL)
    ERR_NAME_PAIR(SQLITE_RANGE)
    ERR_NAME_PAIR(SQLITE_READONLY)
    ERR_NAME_PAIR(SQLITE_READONLY_CANTINIT)
    ERR_NAME_PAIR(SQLITE_READONLY_DBMOVED)
    ERR_NAME_PAIR(SQLITE_READONLY_DIRECTORY)
    ERR_NAME_PAIR(SQLITE_READONLY_RECOVERY)
    ERR_NAME_PAIR(SQLITE_READONLY_ROLLBACK)
    ERR_NAME_PAIR(SQLITE_ROW)
    ERR_NAME_PAIR(SQLITE_SCHEMA)
    ERR_NAME_PAIR(SQLITE_TOOBIG)
    ERR_NAME_PAIR(SQLITE_WARNING)
    ERR_NAME_PAIR(SQLITE_WARNING_AUTOINDEX)
  };
  auto search = err_map.find(rc);
  if (search != err_map.end())
    return Nan::New(search->second).ToLocalChecked();
  search = err_map.find(rc & 0xFF);
  if (search != err_map.end())
    return Nan::New(search->second).ToLocalChecked();
  string buf = "SQLITE_UNKNOWN(";
  buf += rc;
  buf += ")";
  return Nan::New(buf).ToLocalChecked();
}
